{% extends "base/base.html" %}
{%load static%}
{% block start %}


    <!-- start of student info -->
    <section style="padding-top: 80px; min-height: 100vh;" class="container-fluid row mx-auto">

        <div class="col-lg-3 position-relative mx-auto left-menu-section">
            <i  id="left-bar" class="fa-solid fa-bars d-none"></i>
            <div id="left-inner-menu" class="position-sticky  border rounded shadow-sm bg-light p-2 inner-menu " style="left: 0; right: 0; top: 80px;">
                <i id="left-xmark" class="fa-solid fa-xmark d-none"></i>
                <form action="{% url 'add_dates' %}" method="post">
                    {% csrf_token %}
                    <div class="col-lg-12 my-3 row mx-auto date-fun">
                        <div class="col-lg-6">
                            <label for="fromdate">From Date</label>
                            <input class="form-control" type="date" name="fromdate" formtarget="dd-mm-yyyy" id="from-date">
                        </div>
                        <div class="col-lg-6">
                            <label for="todate">To Date</label>
                            <input class="form-control" type="date" name="todate" id="to-date">
                        </div>
                        <div class="col-lg-12 mt-4 text-end">
                            <button type="submit"> Add Dates </button>
                        </div>
                    </div>
                </form>

                <div class="col-lg-12 mb-3 border rounded p-2 date-fun">
                    <h3>Available Dates</h3>
                    <div class="date-field" data-date="2024-07-01">July 1, 2024</div>
                    <div class="date-field" data-date="2024-07-02">July 2, 2024</div>
                    <div class="date-field" data-date="2024-07-03">July 3, 2024</div>
                    <div class="date-field" data-date="2024-07-03">July 3, 2024</div>
                </div>

                <form method="post" class="col-lg-12 row mx-auto">
                    {% csrf_token %}

                    <div class="col-lg-12 mb-3">
                        <label class="mb-1" for="department">Department</label>
                        <select class="form-select" name="department" aria-label="Select Department" >
                            <option></option>
                            {% for department in departments %}
                                <option value="{{ department.name }}" {% if selected_department == department.name %} selected class="selected" {% endif %}>
                                    {{ department.name }}
                                </option>
                            {% endfor %}
                        </select>
                    </div>


                    <div class="col-lg-6 mb-3">
                        <label class="mb-1" for="semester">Semester</label>
                        <select class="form-select" name="semester" required aria-label="Select Semester">
                            <option></option>
                            {% for semester in semesters %}
                                <option value="{{semester.name}}" {% if selcted_semester == semester.name %} selected class="selected" {% endif %}>
                                    {{semester.name}}
                                </option>
                            {% endfor %}
                        </select>
                    </div>

                    <div class="col-lg-6 mb-3">
                        <label class="mb-1" for="shift">Shift</label>
                        <select class="form-select" name="shift" aria-label="Select Group">
                            <option></option>
                            {% for shift in shifts %}
                                <option value="{{shift.shift}}" {% if selected_shift == shift.shift %} selected class="selected" {% endif %}>
                                    {{shift.shift}}
                                </option>
                            {% endfor %}
                        </select>
                    </div>

                    

                    <div class="col-lg-12 mb-3 p-2 text-end">
                        <button type="submit">Filter</button>
                    </div>

                </form>
            </div>
        </div>

        <div class="col-lg-9 bg-light border rounded shadow-sm">
            <!-- Search bar -->
            <div class="col-lg-12n p-0 row my-4 mx-auto">
                <div class="col-lg-6 my-2">
                    {% if request.user.is_authenticated %}
                    <a href="#">
                        <button id="add-btn">Add Student</button>
                    </a>
                    {% endif %}
                </div>
                <div class="col-lg-6 my-2">
                    <form class="d-flex">
                        <input class="form-control me-2" type="search" name="search" placeholder="Search for Students" aria-label="Search">
                        <button type="submit" class="search-btn">
                            <span>Search</span>
                            <i class="fa-solid fa-magnifying-glass d-none"></i>
                        </button>
                    </form>
                </div>
            </div>

            

            <!-- Students Table -->

            <form action="#">

                <div class="col-lg-12n p-0 row my-4 mx-auto">
                    <!-- <div class="col-lg-6"> -->
                        <div class="col-lg-4 mb-3">
                            <label for="date">Date</label>
                            <input type="date" name="date" id="date" class="form-control" required placeholder="Enter date" {% if selected_date %} value="{{selected_date}}" {% endif %}>
                        </div>
                    <!-- </div> -->
                    <!-- <div class="col-lg-6 row"> -->

                        <div class="col-lg-4 mb-3">
                            <label class="mb-1" for="teacher">Teacher</label>
                            <select class="form-select" name="teacher" aria-label="Teacher">
                                <option></option>
                                {% for teacher in teachers %}
                                <option value="{{ teacher.teacher.first_name }} {{ teacher.teahcer.last_name }}" {% if selcted_teacher == teacher.teacher.username %} selected class="selected" {% endif %}>
                                    {{ teacher.teacher.first_name }} {{ teacher.teacher.last_name }}
                                </option>
                                {% endfor %}
                                
                            </select>
                        </div>


                        <div class="col-lg-4 mb-3">
                            <label class="mb-1" for="subject">Select Subject</label>
                            <select class="form-select" name="subject" required aria-label="Select Subject">
                                <option></option>
                                {% for subject in subjects %}
                                <option value="{{ subject.name }}">
                                    {{ subject.code }} - {{ subject.name }}
                                </option>
                                {% endfor %}
                            </select>
                        </div>
                    <!-- </div> -->
                </div>

                <div class="table__body">
                    <table class="table">

                        <thead>
                        <tr>
                            <th scope="col">ID</th>
                            <th scope="col">Status</th>
                            <th scope="col">Roll</th>
                            <th scope="col">Name</th>
                            <th scope="col">Remarks</th>
                        </tr>
                        </thead>
        
                        <tbody>


                        {% for student in students %}
                        <tr>
                            <th scope="row"> {{ student.sr_no }} </th>
        
                            <td>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="1" id="present" name="present">
                                </div>
                            </td>
        
                            <td> {{ student.roll }} </td>
                            <td> {{ student.name }} </td>
                            <td>  </td>
                        </tr>
                        {% endfor %}
        
                        </tbody>

                    </table>
                </div>

                <div class="col-lg-12 text-center my-5 p-2">
                    <button type="submit">Present</button>
                    <!-- <button type="button" class="btn btn-outline-success">Present</button> -->
                </div>
            </form>

        </div>
    </section>
    <!-- End of student info -->




    <!-- Add section -->
     <section id="add-section" class="border rounded shadow">
        <h2 class="text-center my-2">Add Students Excel Sheet</h2>
        <form class="py-3" action="#">
            <div class="col-lg-6 my-1 mx-auto">
                <input type="file">
            </div>
            <div class="col-lg-6 my-1 mx-auto text-end">
                <button id="cancel-btn" class="btn btn-danger"> Cancel</button>
                <button class="btn btn-primary" type="submit">Add</button>
            </div>
        </form>            
     </section>
     <!-- End of Add Section -->

     <!-- <script>
        function get_semester(value){
            var currentUrl = window.location.pathname;
            var params = new URLSearchParams(window.location.search);
            params.set('semester', value);
            window.location.href = currentUrl + '?' + params.toString();
        }
     </script> -->

{% endblock %}